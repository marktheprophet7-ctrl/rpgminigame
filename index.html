<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Mini RPG</title>
    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="title">Mini RPG</div>

      <div class="buttons">
        <button id="btnNew" title="Start a new game">New</button>
        <button id="btnSave" title="Save to this browser">Save</button>
        <button id="btnLoad" title="Load from this browser">Load</button>
        <button id="btnHelp" title="Controls & info">Help</button>
      </div>
    </header>

    <main class="layout">
      <section class="panel">
        <canvas id="game" width="640" height="384" aria-label="Game canvas"></canvas>

        <div class="hint">
          Move: <kbd>W</kbd><kbd>A</kbd><kbd>S</kbd><kbd>D</kbd> / Arrows • Interact:
          <kbd>E</kbd> • Inventory: <kbd>I</kbd> • Toggle log: <kbd>L</kbd>
          <br />
          Combat hotkeys: <kbd>1</kbd> Attack • <kbd>2</kbd> Defend • <kbd>3</kbd> Heal • <kbd>4</kbd> Run •
          <kbd>5</kbd> Fireball • <kbd>6</kbd> Poison • <kbd>7</kbd> Stun
        </div>
      </section>

      <aside class="hud">
        <div class="card">
          <h2>Hero</h2>
          <div id="heroStats" class="mono"></div>
        </div>

        <div class="card">
          <h2>Area</h2>
          <div id="areaInfo" class="mono"></div>
        </div>

        <div class="card">
          <h2>Inventory</h2>
          <div id="inventory" class="mono"></div>
          <div class="small">Tip: Press <kbd>I</kbd> to open the inventory.</div>
        </div>

        <div class="card">
          <h2>Combat</h2>
          <div id="combatBox" class="mono">No combat.</div>
          <div id="combatActions" class="actions hidden">
            <button data-act="attack">Attack</button>
            <button data-act="defend">Defend</button>
            <button data-act="heal">Heal</button>
            <button data-act="run">Run</button>
            <button data-act="fireball">Fireball</button>
            <button data-act="poison">Poison Strike</button>
            <button data-act="stun">Stun Bash</button>
          </div>
        </div>

        <div class="card logCard" id="logCard">
          <h2>Log</h2>
          <div id="log" class="log mono"></div>
        </div>
      </aside>
    </main>

    <dialog id="helpDialog">
      <h2>How to play</h2>
      <ul>
        <li>Explore Town. Tall grass can trigger random encounters.</li>
        <li>Press <kbd>E</kbd> to interact with chests, signs, shop, Elder, and gates.</li>
        <li>Go through the gate to the dungeon. Find the red altar tile and beat the boss.</li>
        <li>Return to the Elder for a reward.</li>
        <li>Save/Load uses LocalStorage in your browser.</li>
      </ul>
      <form method="dialog">
        <button>Close</button>
      </form>
    </dialog>

    <dialog id="invDialog">
      <h2>Inventory</h2>
      <div id="invContent" class="mono"></div>
      <div class="actions">
        <button id="btnUsePotion">Use Potion (+HP)</button>
        <button id="btnCloseInv">Close</button>
      </div>
    </dialog>

    <dialog id="shopDialog">
      <h2>Shop</h2>
      <div class="small">Buy items with gold. Gear auto-equips if better.</div>
      <div id="shopContent" class="mono"></div>
      <div class="actions">
        <button data-buy="potion">Buy Potion (10g)</button>
        <button data-buy="weapon">Buy Weapon (35g)</button>
        <button data-buy="armor">Buy Armor (35g)</button>
        <button id="btnCloseShop">Close</button>
      </div>
    </dialog>

    <dialog id="storyDialog">
      <h2 id="storyTitle">Dialogue</h2>
      <div id="storyBody" class="mono"></div>
      <div class="actions">
        <button id="storyBtn1">OK</button>
        <button id="storyBtn2" class="hidden">Option</button>
      </div>
    </dialog>

    <script src="./game.js"></script>
  </body>
</html>
